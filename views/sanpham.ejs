<%- include('header'); %>

    <div class="col-lg-10">
        <div class="container-fluid">
            <div class="row d-flex justify-content-between mt-3">
                <div class="col-lg-6 text-dark mt-3">
                    <h2>DANH MỤC SẢN PHẨM</h2>
                </div>
                <div class="col-lg-3 mt-3">
                    <nav aria-label="breadcrumb ">
                        <ol class="breadcrumb">
                            <a class="btn btn-primary" href="/addsanpham">Thêm Sản Phẩm</a>
                        </ol>
                    </nav>
                </div>
            </div>
            <hr>
            <div class="row mt-3">
                <div class="col-lg-12 bg-white pb-4 border">
                    <div class="row d-flex justify-content-center">
                        <table class="table table-striped table-inverse table-responsive">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>#</th>
                                    <th width="150" class="img_sp">Ảnh</th>
                                    <th>Tên</th>
                                    <th>Giá</th>
                                    <th>Danh Mục</th>
                                    <th width="200">Hành Động</th>
                                </tr>
                            </thead>
                            <tbody id="result">
                                <% datas.products.sort((a,b)=>b.id-a.id).forEach(function(data){ 

                                     var category = datas.danhmuc.find(value => value.id == data.category);
                                    %>
                                    <tr>
                                        <td scope="row"><strong><%-data.id %></strong></td>
                                        <td><img width="200" height="100" src="<%-data.image[0]%>" class="img-fluid imgsp"></td>
                                        <td><strong><a class="namesp" href=""><%-data.name.substring(0,20) %></a> </strong></td>
                                        <td><strong> <%-data.price %> ...</strong></td>
                                        <td>
                                            <%-category.name %> ...
                                        </td>
                                        <td>
                                            <a onclick="xoasp('<%-data.id%>')" class="btn btn-danger"><i  class="fa fa-trash" ></i></a>
                                            <a onclick="suasp('<%-data.id%>')" class="btn btn-primary"><i class="fa fa-edit"></i></a>
                                        </td>
                                    </tr>
                                    <% }); %>


                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- end content -->
    </div>
    </div>
    <!-- end main -->


    <!-- Modal -->
    <div class="modal fade" id="modelId2" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <form id="addpro" enctype="multipart/form-data">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Thêm Sản Phẩm</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                    </div>
                    <div class="modal-body">

                        <div class="container-fluid">
                            <div class="form-group">
                                <label for="">Tên Sản Phẩm</label>
                                <input type="hidden" id="idedit">
                                <input type="text" name="" id="name" class="form-control" placeholder="Tên Sản Phẩm" aria-describedby="helpId">
                            </div>
                            <div class="form-group">
                                <label for="">Danh Mục</label>
                                <select class="form-control" name="" id="dm">
                                    <option selected>Chọn</option>
                              </select>
                            </div>
                            <div class="form-group">
                                <label for="">Ảnh</label>
                                <input type="file" id="imgadd" name="files[]" multiple>
                            </div>
                            <div class="form-group">
                                <label for="">Giá</label>
                                <input type="text" name="" id="price" class="form-control" placeholder="Giá Sản Phẩm" aria-describedby="helpId">
                            </div>

                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                        <button type="submit" class="btn btn-primary">Lưu</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        $('#exampleModal').on('show.bs.modal', event => {
            var button = $(event.relatedTarget);
            var modal = $(this);
            // Use above variables to manipulate the DOM

        });
    </script>

    <!-- Modal -->
    <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sửa Sản Phẩm</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body">

                    <div class="container-fluid">
                        <div class="form-group">
                            <label for="">Tên Sản Phẩm</label>
                            <input type="text" name="" id="nameedit" class="form-control" placeholder="Tên Sản Phẩm" aria-describedby="helpId">
                        </div>
                        <div class="form-group">
                            <label for="">Danh Mục</label>
                            <select class="form-control" name="" id="dmedit">
                                <option selected>Chọn</option>
                          </select>
                        </div>
                        <div class="form-group">
                            <label for="">Ảnh</label><br>
                            <img src="" alt="" class="mt-3" width="200" height="150" id="imgedit"><br>
                            <input type="file" id="anhsua" name="files[]" multiple>
                        </div>
                        <div class="form-group">
                            <label for="">Giá</label>
                            <input type="text" name="" id="priceedit" class="form-control" placeholder="Giá Sản Phẩm" aria-describedby="helpId">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                    <button type="button" class="btn btn-primary" onclick="save()">Lưu</button>
                </div>
            </div>
        </div>
    </div>
    <%- include('footer'); %>